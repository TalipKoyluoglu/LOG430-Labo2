ADR-002 : Stratégie de persistance

Décision : Adoption d’un ORM (SQLAlchemy) avec un moteur SQL relationnel (PostgreSQL), persisté via volume Docker, et isolé dans son propre conteneur.

Contexte : Il est crucial de garantir la cohérence des données, tout en rendant l’accès aux données transparent pour la logique métier.

Justification :

SQLAlchemy assure une abstraction du SQL, permettant une interaction fluide avec PostgreSQL.

Base et engine sont correctement instanciés dans session.py, centralisant la configuration ORM.

Les appels à session.commit() sont contrôlés dans chaque opération métier (ajouter_produit, annuler_vente…).

Le conteneur PostgreSQL est déclaré dans docker-compose.yml et configuré pour la persistance via pgdata.